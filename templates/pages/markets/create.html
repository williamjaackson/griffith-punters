{% extends "basepage.html" %}

{% block title %}{{ super() }} - Create Market{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold mb-6">Create Market</h1>
<form method="POST" id="create-market-form" class="max-w-lg mx-auto bg-white p-8 rounded shadow space-y-6">
  <div>
    <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Market Name:</label>
    <input type="text" id="name" name="name" required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
    >
  </div>

  <div>
    <label for="description" class="block text-sm font-medium text-gray-700 mb-1">Description:</label>
    <textarea id="description" name="description" required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
    ></textarea>
  </div>

  <div>
    <label for="liquidity" class="block text-sm font-medium text-gray-700 mb-1">Liquidity Parameter:</label>
    <input
      type="number"
      id="liquidity"
      name="liquidity"
      value="1000"
      min="0"
      step="0.01"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
    >
  </div>

  <div id="outcomes-container" class="space-y-2">
    <label class="block text-sm font-medium text-gray-700 mb-1">Outcomes:</label>
    <div>
      <input
        type="text"
        name="outcomes"
        placeholder="Outcome #1"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
      >
    </div>
    <div>
      <input
        type="text"
        name="outcomes"
        placeholder="Outcome #2"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
      >
    </div>
  </div>
  <button type="button" id="add-outcome"
    class="mt-2 px-4 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition"
  >+ Add another outcome</button>

  <div>
    <button type="submit"
      class="w-full px-4 py-2 bg-blue-600 text-white font-semibold rounded hover:bg-blue-700 transition"
    >Create Market</button>
  </div>
</form>

<script>
  (function(){
  const container = document.getElementById('outcomes-container');
  const addBtn = document.getElementById('add-outcome');
  let count = 2;
  addBtn.addEventListener('click', () => {
    count += 1;
    const div = document.createElement('div');
    div.className = 'outcome-field';
    div.innerHTML = `
    <input
      type="text"
      name="outcomes"
      placeholder="Outcome #${count}"
      required
      class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
    >
    `;
    container.appendChild(div);
  });
  })();
</script>
{% endblock %}