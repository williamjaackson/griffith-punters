{% extends "basepage.html" %}

{% block title %}{{ super() }} - Create Market{% endblock %}

{% block content %}
<h1>Create Market</h1>
<form method="POST" id="create-market-form">
    <label for="name">Market Name:</label>
    <input type="text" id="name" name="name" required>
    <br>

    <label for="description">Description:</label>
    <textarea id="description" name="description" required></textarea>
    <br>

    <label for="liquidity">Liquidity Parameter:</label>
    <input
        type="number"
        id="liquidity"
        name="liquidity"
        value="1000"
        min="0"
        step="0.01"
        required
    >
    <br>

    <div id="outcomes-container">
        <label>Outcomes:</label>
        <div>
            <input
                type="text"
                name="outcomes"
                placeholder="Outcome #1"
                required
            >
        </div>
        <div>
            <input
                type="text"
                name="outcomes"
                placeholder="Outcome #2"
                required
            >
        </div>
    </div>
    <button type="button" id="add-outcome">+ Add another outcome</button>
    <br><br>
    <button type="submit">Create Market</button>
</form>

<script>
  (function(){
    const container = document.getElementById('outcomes-container');
    const addBtn = document.getElementById('add-outcome');
    let count = 2;
    addBtn.addEventListener('click', () => {
      count += 1;
      const div = document.createElement('div');
      div.className = 'outcome-field';
      div.innerHTML = `
        <input
          type="text"
          name="outcomes"
          placeholder="Outcome #${count}"
          required
        >
      `;
      container.appendChild(div);
    });
  })();
</script>
{% endblock %}